<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE>SPACE INVADERS 6</TITLE>
    <link rel="stylesheet" type="text/css" href="default.css">
    <link type="text/css" rel="stylesheet" href="/assets/cmirror/codemirror.css">
    <link type="text/css" id="theme" rel="stylesheet" href="/assets/themes/solarized-dark.css">
    <script type="text/javascript" src="/assets/cmirror/codemirror.js"></script>
    <script type="text/javascript" src="/assets/cmirror/python.js"></script>
    <script type="text/javascript" src="codeblocks.js"></script>
</HEAD>


<BODY LANG="en-US" TEXT="#00000a" LINK="#0563c1" DIR="LTR">

<H1>SPACE INVADERS 6</H1>
<P>Move the aliens â€“
to the right only:</P>
<P>alien_start_time
= time.time()</P>
<P><BR>
</P>
<P>ALIENS_STEP_TIME
= 0.8</P>
<P>...</P>
<P><BR>
</P>
<P><BR>
</P>
<P>while
True:</P>
<P>   
...</P>
<P>   
#
########################################</P>
<P>   
#
Change the World</P>
<P>   
#
########################################</P>
<P><BR>
</P>
<P>   
#
Move alien</P>
<P>   
if
now - alien_start_time &gt; ALIENS_STEP_TIME:</P>
<P>    
   alien_columns
= [(column + 1) % fb.width for column in alien_columns]</P>
<P>    
   alien_start_time
= now</P>
<P><BR>
</P>
<P>   
#
Check for collision</P>
<P>   
if
missile_y == alien_row and missile_x in alien_columns:</P>
<P>    
   alien_columns.remove(missile_x)</P>
<P>    
   missile_x,
missile_y = -1, -1</P>
<P>    
   if
not alien_columns:</P>
<P>    
       break</P>
<P>   
...</P>
<P><BR>
</P>
<P><BR>
</P>
<P>if
alien_columns:</P>
<P>   
print(&quot;Ouch!&quot;)</P>
<P>else:</P>
<P>   
print(&quot;You
win!&quot;)</P>
<P><BR>
</P>
<P><BR>
</P>
<p>Full project:</p>
<div class="code" data-firstline="1"> <div></div> <textarea>
from rstem.accel import Accel
from rstem.button import Button
from rstem.led_matrix import FrameBuffer
import time

fire_button = Button(25)

fb = FrameBuffer()
accel = Accel()

spaceship_position = fb.width / 2

alien_columns = [0, 1, 2, 3]
alien_row = fb.height - 1
alien_start_time = time.time()

ALIENS_STEP_TIME = 0.8

missile_x, missile_y = -1, -1

MISSILE_COLOR = 10
MISSILE_STEP_TIME = 0.1

TILT_FORCE = 0.1
SPACESHIP_STEP = 0.1

while True:
	# ########################################
	# Get inputs
	# ########################################
	presses = fire_button.presses()
	x_force, y_force, z_force = accel.forces()
	now = time.time()

	# ########################################
	# Change the World
	# ########################################

	if missile_x >= 0 and now - missile_start_time > MISSILE_STEP_TIME:
		# Missile already launched - move it up
		missile_y += 1
		if missile_y >= fb.height:
			missile_x, missile_y = -1, -1
		missile_start_time = now
	elif presses:
		# Button was pressed - launch missile
		missile_x, missile_y = (round(spaceship_position), 1)
		missile_start_time = now

	# Move spaceship
	if x_force > TILT_FORCE:
		spaceship_position -= SPACESHIP_STEP
	elif x_force < -TILT_FORCE:
		spaceship_position += SPACESHIP_STEP
	spaceship_position = max(0, min(fb.width - 1, spaceship_position))

	# Move alien
	if now - alien_start_time > ALIENS_STEP_TIME:
		alien_columns = [(column + 1) % fb.width for column in alien_columns]
		alien_start_time = now

	# Check for collision
	if missile_y == alien_row and missile_x in alien_columns:
		alien_columns.remove(missile_x)
		missile_x, missile_y = -1, -1
		if not alien_columns:
			break

	# ########################################
	# Show world
	# ########################################

	fb.erase()

	# Draw missile
	if missile_x >= 0:
		fb.point(missile_x, missile_y, MISSILE_COLOR)

	# Draw spaceship
	fb.point(round(spaceship_position), 0)

	# Draw aliens
	for column in alien_columns:
		fb.point(column, alien_row)

	# Show FrameBuffer on LED Matrix
	fb.show()
	time.sleep(0.001)

if alien_columns:
	print("Ouch!")
else:
	print("You win!")
</textarea></div>
	<p class=nextprev><a href="SPACE_INVADERS_5.html">prev</a>|
<a href="SPACE_INVADERS_7.html">next</a></p>
</body></html>
	
