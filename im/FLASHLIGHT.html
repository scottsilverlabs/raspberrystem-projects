<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="CONTENT-TYPE" content="text/html; charset=utf-8"><title>FLASHLIGHT</title>

<link rel="stylesheet" type="text/css" href="default.css">
<link type="text/css" rel="stylesheet" href="/assets/cmirror/codemirror.css">
<link type="text/css" id="theme" rel="stylesheet" href="/assets/themes/solarized-dark.css">
<script type="text/javascript" src="/assets/cmirror/codemirror.js"></script>
<script type="text/javascript" src="/assets/cmirror/python.js"></script>
<script type="text/javascript" src="codeblocks.js"></script>
</head>
<body style="direction: ltr; color: rgb(0, 0, 10);" lang="en-US" link="#0563c1">
<h1>FLASHLIGHT</h1>
<p class="MsoNormal">In <a href="USING_BUTTONS_WITH_GPIO.html">Using Buttons With GPIO</a>,
we were able to get button input from a
GPIO.<span style="">&nbsp; </span>In this
project, we’re going to
use that input to control another circuit.<o:p></o:p></p>
<p class="MsoNormal">For this project, we’re going to wire
two completely
independent circuits:<o:p></o:p></p>
<ol>
<li>
<p><span style=""><span style=""></span></span>The
first circuit will consist of a button wired
to a GPIO (like we did in <a href="USING_BUTTONS_WITH_GPIO.html">Using
Buttons With GPIO</a>);<o:p></o:p></p>
</li>
<li>
<p><span style=""><span style=""><span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;"></span></span></span>The
second circuit will consist of an LED wired
to a separate GPIO (like we did back in <a href="GENERAL_PURPOSE_INPUT-OUTPUT.html">General Purpose
Input/Output</a>)<o:p></o:p></p>
</li>
</ol>
<p class="MsoNormal">Here is what the breadboard should
look like with the two
circuits wired.<span style="">&nbsp; </span>If
you have any
questions about how to wire either of these two circuits, refer back to
the projects referenced above.<o:p></o:p></p>
<p class="MsoNormal"><i style=""><span style="font-weight: bold;">BRI - INSERT
FRITZING
DIAGRAM INDICATING THE TWO CIRCUITS</span><o:p></o:p></i></p>
<p class="MsoNormal">You’ll notice that our button is
wired to GPIO14 and our LED
is wired to GPIO18.<span style="">&nbsp; </span><o:p></o:p></p>
<p class="MsoNormal">Now that we have the circuits built
and ready to go, it’s
time to write our software.<span style="">&nbsp; </span>For
this
project, our software is going to do two things:<o:p></o:p></p>
<ol>
<li>
<p><span style=""><span style=""><span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;</span></span></span>Read
the state of the button (pressed or
unpressed) using a GPIO as input<o:p></o:p></p>
</li>
<li>
<p><span style=""><span style=""><span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;&nbsp;</span></span></span>If
the button is pressed, turn on the LED using
a GPIO as output, and if the button is not pressed, turn off the LED
using the
GPIO as output<o:p></o:p></p>
</li>
</ol>
<p class="MsoNormal">Here is the code that will accomplish
this:</p><p class="MsoNormal"><o:p></o:p></p>
<div class="code" data-firstline="1">
<div></div>
<textarea>from rstem.button import Button
from rstem.gpio import Output
my_button = Button(14)
my_led = Output(18)
if my_button.is_pressed():
my_led.on()
else:
my_led.off()
</textarea></div>
<p></p><p>Let's to through the code line-by-line and take a look at what
it's doing:</p>
<ul>
<li>
<p>On Line 1, we import the module we will need to initialize
and get information from the button (called <span style="font-family: Courier New,Courier,monospace;">Button()</span>)</p></li><li>
<p>On Line 2, we import the module we will need to initialize
and get information from the LED (called <span style="font-family: Courier New,Courier,monospace;">Output()</span>)</p></li><li><p>On Line 4, we initialize our button. &nbsp;We
call the <span style="font-family: Courier New,Courier,monospace;">Button()</span>
function, which returns a "Button object" to our <span style="font-family: Courier New,Courier,monospace;">my_button </span>variable.
&nbsp;We talked about that a bit in <a href="VARIABLES_-_ASSIGNMENTS.html">Variables &amp; Assignments</a>,
but the important thing to understand is that we can now use <span style="font-family: Courier New,Courier,monospace;">my_button</span>
to call other GPIO functions that can control our button</p></li><li><p>On Line 5, we initialize our LED. &nbsp;We
call the <span style="font-family: Courier New,Courier,monospace;">Output()</span>
function, which returns a "GPIO Output object" to our <span style="font-family: Courier New,Courier,monospace;">my_led </span>variable.
&nbsp;Again, we talked about that a bit in <a href="VARIABLES_-_ASSIGNMENTS.html">Variables &amp; Assignments</a>,
but the important thing to understand is that we can now use <span style="font-family: Courier New,Courier,monospace;">my_led</span>
to call other GPIO functions that can control our LED</p></li>
<li>
<p>On Line 7, we check the state of the button using the <span style="font-family: Courier New,Courier,monospace;">is_pressed()</span>
function. &nbsp;This function will return True if the button is pressed
(this is done by reading the voltage at the GPIO, like we discussed in <a href="USING_BUTTONS_WITH_GPIO.html">Using Buttons With GPIO</a>), and will return False if the button is unpressed</p></li><li><p>On Line 8, if the return from our if statement is True (the button is pressed), we light the LED using the on() function</p></li><li><p>On
Lines 9 and 10, if the return from our if statement is False (the
button is unpressed), we turn off the LED using the off() function</p></li></ul><p class="MsoNormal"></p><p class="MsoNormal">Notice
that with this code, the button status is only read one time when the
program is run. &nbsp;So, if you want the LED to illuminate, you need
to be holding the button when you run the code. &nbsp;If you’re not
holding down the button at the
time the program is run, the code will see that the button is unpressed
and the LED will not illuminate.<o:p></o:p></p>
<p class="MsoNormal">To make this program more useful, we can put the
code that reads the button into a loop
so that it will
continually read the button state and update the LED every time it
changes. &nbsp;To do this, we simply put the last four lines of the
code (the lines that test the state of the button and turn the LED on
or off) in a <span style="font-family: Courier New,Courier,monospace;">while True:</span> loop, like this:</p><p class="MsoNormal"><o:p></o:p></p>
<div class="code" data-firstline="1">
<div></div>
<textarea>from rstem.button import Button
from rstem.gpio import Output
while True:
my_button = Button(14)
my_led = Output(18)
if my_button.is_pressed():
my_led.on()
else:
my_led.off()
</textarea></div>
<p>Give it a try…the flashlight will continue to work until you
manually stop the program.</p><p></p>
	<p class=toc><a href="USING_BUTTONS_WITH_GPIO.html">prev</a>|
<a href="MANY_BUTTONS.html">next</a></p>
</body></html>

