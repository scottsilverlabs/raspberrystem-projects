<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="CONTENT-TYPE" content="text/html; charset=utf-8"><title>USING BUTTONS WITH GPIO</title>

<link rel="stylesheet" type="text/css" href="default.css">
<link type="text/css" rel="stylesheet" href="/assets/cmirror/codemirror.css">
<link type="text/css" id="theme" rel="stylesheet" href="/assets/themes/solarized-dark.css">
<script type="text/javascript" src="/assets/cmirror/codemirror.js"></script>
<script type="text/javascript" src="/assets/cmirror/python.js"></script>
<script type="text/javascript" src="codeblocks.js"></script>
</head>

<body style="direction: ltr; color: rgb(0, 0, 10);" lang="en-US" link="#0563c1">
<h1>USING BUTTONS WITH GPIO</h1>
<p class="MsoNormal">In the previous project, we inserted
a button into the
circuit to act as a physical switch – when pressed, the circuit was
completed
and when left unpressed, the circuit was open.<o:p></o:p></p>
<p class="MsoNormal">While using a button in this way is
just fine when there
isn’t much logic behind the button presses (you just want to flip the
circuit
between two states), if you want to do anything more complicated with
the
button, this won’t work.<span style="">&nbsp; </span>For
example,
perhaps you want to count how many times a button is pressed in a
certain time
period, and take different actions based on that number?<span style="">&nbsp; </span>Or perhaps you want to
time how long a button
is pressed and take action based on the length of the press?<span style="">&nbsp; </span>Or maybe a button press
needs to trigger an
action in another circuit that the button isn’t attached to?<o:p></o:p></p>
<p class="MsoNormal">To do things more complicated
operations like these, instead
of wiring the button directly into the circuit, instead we can wire the
button
as an input to a GPIO.<span style="">&nbsp; </span>As
we discussed
earlier, GPIOs can be used as inputs to take information from external
components (like buttons); that input can then be acted upon by the
Raspberry
Pi and appropriate actions can be taken.<o:p></o:p></p>
<p class="MsoNormal">GPIO inputs work by reading the
voltage being created by the
circuit at the GPIO pin – either 0V (“low” or “off”) or 3.3V (“high” or
“on”).<o:p></o:p></p>
<p class="MsoNormal">For example, a GPIO can be used to
get information from a
button or switch.<span style="">&nbsp; </span>In
the circuit design we use and will explain below, when a button is left
unpressed, the voltage at the
GPIO pin is
“high” (3.3V); when the button is pressed, the voltage at the GPIO pin
will go
“low” (switch to 0V).<span style="">&nbsp; </span>The
GPIO will
register the voltage, and the Raspberry Pi can then take action on
either a
pressed or unpressed button.<o:p></o:p></p>
<p class="MsoNormal">To wire a button to a GPIO, this is
what the circuit schematic would
look like:<o:p></o:p></p>
<div style="text-align: center;"><span style="font-family: &quot;Verdana&quot;,serif;"><span style="font-style: italic;"><img style="width: 745px; height: 329px;" alt="" src="img/Pushbutton-to-GPIO.png"></span></span><br>
</div>
<p class="MsoNormal"></p><h1>Building the Circuit</h1><p class="MsoNormal">To implement this in an actual
breadboard circuit is easy.<span style="">&nbsp; </span>Here
is how to build that circuit on the
breadboard and then use code to get input from the button through the
GPIO:</p>
<p style="font-weight: bold;">Step
#1: &nbsp;Pl<span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;"></span>ace
button on breadboard.<o:p></o:p></p>
<p class="MsoNormal">We start by placing a button on
the breadboard.<span style="">&nbsp; </span>It’s
important that the
button is oriented correctly – the two independent sides of the button
must sit
on different connect strips, as follows:</p>
<p class="MsoNormal"><o:p></o:p></p>
<p class="MsoNormal" style="margin-left: 0.25in;"><span style=""><img style="width: 542px; height: 316px;" alt="" src="img/buttonright.jpg" v:shapes="Picture_x0020_1"></span><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style=""><img style="width: 540px; height: 318px;" alt="" src="img/buttonwrong.jpg" v:shapes="Picture_x0020_2"><!--[endif]--></span><o:p></o:p></p>
<p class="MsoNormal" style="margin-left: 1.25in;"><b style="">&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; CORRECT</b><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><b style=""><span style="color: red;">WRONG!!!<o:p></o:p></span></b></p>
<p class="MsoNormal" style="margin-left: 1.25in;"><o:p>&nbsp;</o:p></p>
<p style="text-indent: -0.25in;"><b style=""><span style=""><span style="">2.<span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;&nbsp;
</span></span></span></b><b style="">Step
#2: &nbsp;Wire one side of the button to a GPIO.<o:p></o:p></b></p>
<p class="MsoNormal">Next, we connect one side of the
button (it doesn’t matter which one, as the internal components of the
button
are symmetrical) to a GPIO.<span style="">&nbsp; </span>In
this
example, we’ll connect the button to GPIO14.<o:p></o:p></p>
<p class="MsoNormal" style="margin-left: 0.25in; text-align: center;" align="center"><span style=""><img style="width: 831px; height: 462px;" alt="" src="../../../../proj19-2.jpg" v:shapes="Picture_x0020_3"><!--[endif]--></span><o:p></o:p></p>
<p><span style="font-weight: bold;">Step #3:
&nbsp;Wire the other side of the button to
ground.</span><o:p></o:p></p>
<p class="MsoNormal">Finally, we connect the other side
of the button to ground.<span style="">&nbsp; </span>In
this
example, we are connecting the other side of the button to the
blue&nbsp;strip,
which is connected to ground.</p>
<p class="MsoNormal"><o:p></o:p></p>
<p class="MsoNormal" style="margin-left: 0.25in; text-align: center;" align="center"><span style=""><img style="width: 846px; height: 459px;" alt="" src="../../../../proj19-3.jpg" v:shapes="Picture_x0020_4"></span><o:p></o:p></p>

<p class="MsoNormal">That’s it for the wiring – pretty
simple, right?</p><h2>Writing the Code</h2>
<p class="MsoNormal">Now that the circuit is wired, we can
write the code to get
the GPIO state (low or high):<o:p></o:p></p>
<div class="code" data-firstline="1">
<div></div>
<textarea>
from rstem.button import Button
my_button = Button(14)
print(button.is_pressed())
</textarea></div>
<p class="MsoNormal">In this most basic example, we are
reading the GPIO a single
time (the moment the program is run) and we are outputting the state of
the
button at that moment.<span style="">&nbsp; </span>Try
running the
program a couple times, either holding down or not holding down the
button at
the moment the program is run.<o:p></o:p></p>
<p class="MsoNormal">To make the program a little more
interesting (and
convenient!), we can insert a loop so that, instead of just reading the
state
of the GPIO one time, we can continually read and print the state of
the GPIO
for as long as the program is running.<span style="">&nbsp;
</span><o:p></o:p></p>
<p class="MsoNormal">Here’s what that code would look like:<o:p></o:p></p>
<div class="code" data-firstline="1">
<div></div>
<textarea>
from rstem.button import Button
import time
my_button = Button(14)
while True:
my_button = Button(14)
print(button.is_pressed())
time.sleep(.01)
</textarea></div>
<p class="MsoNormal">Run this program and then alternate
between pressing and not
pressing the button.<span style="">&nbsp; </span>Take
a look at the
output window – you should see an indication of when the button is
pressed and
when it is unpressed.<o:p></o:p></p>
<p class="MsoNormal"><o:p>&nbsp;</o:p></p>
	<p class=toc><a href="INTRODUCING_BUTTONS.html">prev</a>|
<a href="FLASHLIGHT.html">next</a></p>
</body></html>

