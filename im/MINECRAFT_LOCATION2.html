<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="CONTENT-TYPE" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="default.css">
    <link type="text/css" rel="stylesheet" href="/assets/cmirror/codemirror.css">
    <link type="text/css" id="theme" rel="stylesheet" href="/assets/themes/solarized-dark.css">
    <script type="text/javascript" src="/assets/cmirror/codemirror.js"></script>
    <script type="text/javascript" src="/assets/cmirror/python.js"></script>
    <script type="text/javascript" src="onload.js"></script>
    <script type="text/javascript" src="codeblocks.js"></script>
    <script type="text/javascript" src="toc_order.js"></script>
    <script type="text/javascript" src="project.js"></script>
</head>
<body>
<header>
    <div id=title></div>
    <div id=description>This is a minecraft project</div>
    <div id=hw_required>
    Accelerometer Cell<br>
    LED Matrix Cell
    </div>
    <div id=troubleshooting><a href="TROUBLESHOOTING.html">Having issues?  Check out the Troubleshooting Guide.</a></div>
</header>
<h2>The Introduction</h2>
<h2>The Hardware</h2>
<img class="bb" src="img/Minecraft_Matrix_Accel_4way_1button_bb.png">
<h2>The Software</h2>
<div class="code" data-firstline="1"> <div></div> <textarea>
from rstem.accel import Accel
from rstem.button import Button
from rstem.led_matrix import FrameBuffer
from rstem.mcpi import minecraft, control
import time

control.show()
mc = minecraft.Minecraft.create()

keymap = {
    Button(23) : control.left,
    Button(14) : control.right,
    Button(18) : control.forward,
    Button(15) : control.backward,
    Button(7)  : control.smash,
    }

accel = Accel()

fb = FrameBuffer()
count = 0
FLASH_COUNT = 3
flash_lit = True
while True:
    pos = mc.player.getTilePos()
    flashing = False
    x = round(pos.x/25 + 3.5)
    if not 0 <= x <= 7:
        flashing = True
    x = min(7, max(0, x))
    z = round(pos.z/25 + 3.5)
    if not 0 <= z <= 7:
        flashing = True
    z = min(7, max(0, z))

    fb.erase()
    count += 1
    if count > FLASH_COUNT:
        flash_lit = not flash_lit
        count = 0
    if not flashing or flashing and flash_lit:
        fb.point(z, x)
    fb.show()

    for button, action in keymap.items():
        if button.is_pressed():
            action()
        else:
            action(release=True)

    x, y, z = accel.forces()
    control.look(up=20*y, left=20*x)
    
    time.sleep(0.01)


</textarea></div>
<h2>The Challenge</h2>
<div id=footer></div>
</body></html>
